<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>3-7已完成租赁</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1, minimum-scale=1">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/swiper.min.css">
    <link rel="stylesheet" href="../css/user/lease_order_detail.css">
    <link rel="stylesheet" href="../css/weui.css">
    <link rel="stylesheet" href="../css/myweui.css">
    <script src="../js/weui.js"></script>
    <script src="../js/myweui.js"></script>
    <script src="../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/swiper.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/base.js" type="text/javascript" charset="utf-8"></script>
    <style>
    .shuru {
        width: 2rem;
        outline: none;
    }

    .beizhu_title {
        display: inline-block;
        vertical-align: top;
        margin-top: 0.08rem;
    }

    textarea {
        outline: none;
        margin: 0 auto;
        margin-top: 0.1rem;
        margin-left: 0.1rem;
        margin-right: 0.1rem;
        line-height: 0.35rem;
    }

    .beizhu_content {
        display: inline-block;
        border-radius: 0.1rem;
        border: 0.01rem solid #EBEBEB;
    }
    </style>
</head>

<body>
    <div class="container">
        <div class="address_box">
            <div class="local_box">
                <img class="location_img" src="../images/time.png" alt="">
                <span class="date_content start_date">7月16日</span><span class="date_content end_date">~7月18日</span>
                <span class="time_end">共三天</span>
            </div>
            <div class="user_box">
                <img class="head_img" src="../images/head_img.png" alt="">
                <p class="user_name">
                    <input class="shuru" type="text" maxlength="5" placeholder="赵先生">
                </p>
                <p class="user_phone">
                    <input class="shuru" type="number" maxlength="11" onkeyup="this.value = this.value.slice(0,11)" placeholder="15122953260">
                </p>
            </div>
        </div>
        <div class="con_warp">
            <div class="top_orderstatus_box">
                <p class="buy_message buy_message_top">订单号:123456</p>
                <p class="top_orderstatus">待归还</p>
            </div>
            <ul class="con_list_ul">
                <li class="con_list_li">
                    <img class="con_list_img" src="../images/5653ceba1a219@2x.png" alt="">
                    <div class="goods_box">
                        <p class="goods_title">HO56C手动轮椅车</p>
                        <span class="goods_content">体积更小轻松放入汽车后备箱</span>
                        <p class="goods_money">$2000.00/天</p>
                        <span class="goods_nums">  X1</span>
                    </div>
                </li>
            </ul>
        </div>
        <div class="peisong">
            <div class="take_it_box peisong_item">
                <p class="take_it border_item">自提点<span class="take_it_item">A自提点</span></p>
            </div>
            <div class="qrcode_box peisong_item ">
                <p class="back_title">归还二维码</p>
                <div class="img_box border_item">
                    <img class="qrcode_img" src="../images/1534578527.png" alt="">
                    <p class="tips">出示您的二维码给工作人员</p>
                </div>
            </div>
            <div class="peisong_item ">
                <div class="peisong_box">
                    <p> 押金
                        <p class="cash_p"><img src="../images/about_us.png" alt="">申请免押金</p> <span>￥8.00</span></p>
                </div>
                <div class="beizhu_box">
                    <p class="beizhu_title"> 备注信息： </p>
                    <p class="beizhu_content">
                        <textarea name="" id="" cols="35" rows="3">晚一些的发货发的撒佛挡杀佛的萨芬晚一些的发货发的撒佛挡杀佛的萨芬晚一些的发货发的撒佛挡杀佛的萨芬</textarea>
                    </p>
                </div>
            </div>
            <div class="xiaoji_box">
                <p class="xiaoji">共一件商品 小计 : ￥2000.00</p>
            </div>
        </div>
        <div class="zhifu">
            <div class=" pay_method">
                <div class="method_choose">
                    <p class="wx_pay pay_item"> 微信支付<span><img class="hand" src="../images/hand.png" alt="">推荐使用</span> </p>
                    <p class="ali_pay pay_item"> 支付宝支付 </p>
                </div>
                <div class="metnod_pic">
                    <img class="sure sure_item" src="../images/sure.png" alt="">
                    <img class="cancel sure_item" src="../images/sure_1.png" alt="">
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
        <!-- 待付款 -->
        <div class="pay_box" style="display: none">
            <p class="choose_item choose">再来一单</p>
        </div>
        <!-- 再来一单 -->
        <div class="pay_box ">
            <p class="choose_item choose xuzu">续租</p>
        </div>
        <!-- 评价 -->
        <div class="pay_box " style="display: none">
            <p class="choose_item choose evaluate">评价</p>
        </div>
    </footer>
    <div class="popup-box" style="display:none">
        <div class="popup">
            <div class="popup_inbox">
                <div class="content_box">
                    <p class="choose_backtime">选择归还时间</p>
                    <p class="back_time">2018年06月31日</p>
                    <div class="sure_btn_box">
                        <p class="sure_btn"> 确定支付￥200</p>
                        <p class="add_day"><img src="../images/about_uss.png" alt="">增加一天</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../js/picker.min.js"></script>
    <script src="../js/common.js" type="text/javascript" charset="utf-8"></script>
    <script>
    $(document).ready(function() {
        get_main_content();

        //初始化时间
        var local_year = new Date().getFullYear(),
            local_month = new Date().getMonth() + 1,
            local_day = new Date().getDate(),
            next_local_day = new Date().getDate() + 2;
        var $menu_box = $('.content_body .con_title>li');
        $('.start_date').text(local_month + '月' + local_day + '日');
        $('.end_date').text('~' + local_month + '月' + next_local_day + '日');
        $('.back_time').text(local_year + '年' + local_month + '月' + local_day + '日');

    })

    function get_main_content() {

    }

    var first_time, next_time;
    // 开始时间
    document.querySelector('.start_date').addEventListener('click', function() {
        weui.datePicker({
            start: new Date(),
            end: '2030-12-29',
            /**
             * https://zh.wikipedia.org/wiki/Cron
             * cron 表达式后三位
             * 示例：
             *  * * *                每天
             *  5 * *                每个月的5日
             *  1-10 * *             每个月的前10日
             *  1,5,10 * *           每个月的1号、5号、10号
             *  *\/2 * *             每个月的 1、3、5、7...日，注意写的时候斜杠“/”前面没有反斜杠“\”，这是因为是注释所以需要转义
             *  * 2 0                2月的每个周日
             *  * * 0,6              每个周末
             *  * * 3                每周三
             */

            defaultValue: [new Date().getFullYear(), new Date().getMonth() + 1, new Date().getDate()],
            onChange: function(result) {
                console.log(result);
            },
            onConfirm: function(result) {
                $('.start_date').text(result[1] + '月' + result[2] + '日')
                first_time = new Date(result[0] + '-' + result[1] + '-' + result[2]);

                console.log(first_time);
                setTimeout(get_nextTime(), 1500)
            },
            id: 'datePicker'
        });
    });
    //结束时间
    function get_nextTime() {
        document.querySelector('.end_date').addEventListener('click', function() {
            weui.datePicker({
                start: new Date(),
                end: '2030-12-29',
                /**
                 * https://zh.wikipedia.org/wiki/Cron
                 * cron 表达式后三位
                 * 示例：
                 *  * * *                每天
                 *  5 * *                每个月的5日
                 *  1-10 * *             每个月的前10日
                 *  1,5,10 * *           每个月的1号、5号、10号
                 *  *\/2 * *             每个月的 1、3、5、7...日，注意写的时候斜杠“/”前面没有反斜杠“\”，这是因为是注释所以需要转义
                 *  * 2 0                2月的每个周日
                 *  * * 0,6              每个周末
                 *  * * 3                每周三
                 */

                defaultValue: [new Date().getFullYear(), new Date().getMonth() + 1, new Date().getDate()],
                onChange: function(result) {
                    console.log(result);
                },
                onConfirm: function(result) {
                    $('.end_date').text('~' + result[1] + '月' + result[2] + '日')
                    next_time = new Date(result[0] + '-' + result[1] + '-' + result[2]);
                    nYlts = parseInt((Math.abs(next_time - first_time) / 1000 / 60 / 60 / 24) + 1);
                    $('.time_end').text('共' + nYlts + '天')
                    console.log(nYlts);
                },
                id: 'datePicker'
            });
        });
    }
    //续租
    // 开始时间
    document.querySelector('.back_time').addEventListener('click', function() {
        weui.datePicker({
            start: new Date(),
            end: '2030-12-29',
            /**
             * https://zh.wikipedia.org/wiki/Cron
             * cron 表达式后三位
             * 示例：
             *  * * *                每天
             *  5 * *                每个月的5日
             *  1-10 * *             每个月的前10日
             *  1,5,10 * *           每个月的1号、5号、10号
             *  *\/2 * *             每个月的 1、3、5、7...日，注意写的时候斜杠“/”前面没有反斜杠“\”，这是因为是注释所以需要转义
             *  * 2 0                2月的每个周日
             *  * * 0,6              每个周末
             *  * * 3                每周三
             */

            defaultValue: [new Date().getFullYear(), new Date().getMonth() + 1, new Date().getDate()],
            onChange: function(result) {
                console.log(result);
            },
            onConfirm: function(result) {
                first_time = result[0] + '年' + result[1] + '月' + result[2] + '日';
                $('.back_time').text(first_time);
            },
            id: 'datePicker'
        });
    });
    //前往支付
    $('.footer_buycar').on('click', function() {
        window.location.href = "take_it.html"
    })
    //申请免押金
    $('.cash_p').on('click', function() {
        window.location.href = "deposit_free.html"
    })
    //关闭弹窗
    $('.choose_item').on('click', function() {
        event.stopPropagation();
        $('.popup-box').show();
        $(document).on('click', function(event) {
            if (!$('.weui-picker').is(':hidden')) {
                return;
            } else {
                var tanceng = $('.popup_inbox');
                if (!tanceng.is(event.target) && tanceng.has(event.target).length === 0) {
                    $('.popup-box').hide();
                }
            }

        });
    })
    </script>
</body>

</html>